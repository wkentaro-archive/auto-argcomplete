#compdef python

autoload +X _python

_auto_argcomplete_python () {
  local -a reply
  local ret=1

  if [ $CURRENT -eq 2 ]; then
    _python
  elif [ "${words[2]}" = "setup.py" ]; then
    _python
  else
    reply=( $(auto_argcomplete ${words[2]}) )
    if [ ${#reply} -eq 0 ]; then
      _python
    else
      _describe -t reply "options" reply && ret=0
    fi
  fi
}
_auto_argcomplete_python
